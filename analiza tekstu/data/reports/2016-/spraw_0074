przedmiot TAS temat D nr_indeksu 365145 liczba_pkt 2 

\n\nZadanie\ 40\ ------------------------------------------\n\nSERWER:\n-------\n\nq.h:\n---------------------------------------------\n//gsoap\ ns\ service\ name:\ qqq\n//gsoap\ ns\ service\ namespace:\ qqq\n\n//gsoap\ ns\ service\ style:\ rpc\n//gsoap\ ns\ service\ encoding:\ encoded\n//\ gsoap\ ns\ service\ style:\ document\n//\ gsoap\ ns\ service\ encoding:\ literal\n\nstruct\ t_tab\ \{\n\ \ float\ *__ptr\;\ int\ __size\;\n\}\;\nint\ ns__pomnozRazy2(struct\ t_tab\ par,\ struct\ t_tab\ *return_)\;\n------------------------------------------------------------------------\n\nq_serv.c:\n---------------------------------------------\n#include\ \"qqq.nsmap\"\n\ \ //\ ten\ plik\ wlacza\ tez\ inne\ pliki\ nag³ówkowe!\n\nint\ main()\ \{\n\ \ struct\ soap\ soap\;\n\ \ soap_init(&soap)\;\n\n\ \ int\ b=soap_bind(&soap,\ NULL,\ 10000,\ 100)\;\ \n\ \ \ \ \ //\ 10000\ -nr\ portu\ na\ ktorym\ serwer\ czeka\ na\ klientow\n\ \ if(b<0)\ \{soap_print_fault(&soap,\ stderr)\;\ soap_done(&soap)\;\ exit(1)\;\}\n\n\ \ printf(\"Serwer\ dziala\\n\")\;\n\n\ \ while\ (1)\ \{\n\ \ \ \ soap_accept(&soap)\;\ //\ czeka\ na\ soap\ msg\n\ \ \ \ soap_serve(&soap)\;\ //\ obsluga\ klienta\n\ \ \ \ \ \ //\ UWAGA:\ mo¿na\ w\ tym\ miejscu\ tworzyc\ w±tek\ POSIX\ i\ przekazywaæ\ mu\ obs³ugê\ klienta\ !!!\n\ \ \ \ soap_end(&soap)\;\ //\ zwalnianie\ pamieci\n\ \ \ \ printf(\".\")\;\ fflush(stdout)\;\n\ \ \}\n\n\ \ return\ 0\;\n\}\n\n//\ implementacja\ operacji\ \"pomnozRazy2\"\nint\ ns__pomnozRazy2(struct\ soap*\ soap,\n\ \ \ \ struct\ t_tab\ x,\ struct\ t_tab\ *return_)\ \{\n\ \ int\ i\;\n\n\ \ int\ d=\ x.__size\;\ float\ *f1=\ x.__ptr\;\n\n\ \ printf(\"serwer/dbg:\ argument:\\n\")\;\n\ \ for(i=0\;\ i<d\;\ i++)\ printf(\"%f\ \",\ x.__ptr\[i\])\;\ printf(\"\\n\")\;\n\n\ \ //\ zakladam\ ze\ return_\ wskazuje\ na\ istniejaca\ struct\ t_tab\ !!!\n\ \ return_->__size=\ d\;\n\ \ float\ *f2=\ soap_malloc(soap,\ d*sizeof(float))\;\n\ \ return_->__ptr=\ f2\;\n\n\ \ for(i=0\;\ i<d\;\ i++)\ f2\[i\]=\ 2*f1\[i\]\;\n\n\ \ for(i=0\;\ i<d\;\ i++)\ printf(\"%f\ \",\ f2\[i\])\;\ printf(\"\\n\")\;\n\n\ \ return\ SOAP_OK\;\n\}\n------------------------------------------------------------------------\n\nsoapcpp2\ -S\ -c\ q.h\n------------------------------------------------------------------------\n**\ \ The\ gSOAP\ code\ generator\ for\ C\ and\ C++,\ soapcpp2\ release\ 2.7.16\n**\ \ Copyright\ (C)\ 2000-2010,\ Robert\ van\ Engelen,\ Genivia\ Inc.\n**\ \ All\ Rights\ Reserved.\ This\ product\ is\ provided\ \"as\ is\",\ without\ any\ warranty.\n**\ \ The\ soapcpp2\ tool\ is\ released\ under\ one\ of\ the\ following\ three\ licenses:\n**\ \ GPL,\ the\ gSOAP\ public\ license,\ or\ the\ commercial\ license\ by\ Genivia\ Inc.\n\nSaving\ soapStub.h\ annotated\ copy\ of\ the\ input\ definitions\nSaving\ soapH.h\ serializers\nSaving\ soapC.c\ serializers\nSaving\ soapServer.c\ server\ request\ dispatcher\nSaving\ soapServerLib.c\ server\ request\ dispatcher\ with\ serializers\ (use\ only\ for\ libs)\nCompliance\ warning:\ array\ 'struct\ t_tab'\ is\ not\ compliant\ with\ WS-I\ Basic\ Profile\ 1.0a,\ reason:\ SOAP\ encoded\ array\nUsing\ ns\ service\ name:\ qqq\nUsing\ ns\ service\ style:\ rpc\nUsing\ ns\ service\ encoding:\ encoded\nUsing\ ns\ service\ location:\ http://localhost:80\nUsing\ ns\ schema\ namespace:\ qqq\nSaving\ qqq.wsdl\ Web\ Service\ description\nCompliance\ warning:\ operation\ 'ns__pomnozRazy2'\ is\ not\ compliant\ with\ WS-I\ Basic\ Profile\ 1.0a,\ reason:\ uses\ SOAP\ encoding\nSaving\ qqq.pomnozRazy2.req.xml\ sample\ SOAP/XML\ request\nSaving\ qqq.pomnozRazy2.res.xml\ sample\ SOAP/XML\ response\nSaving\ qqq.nsmap\ namespace\ mapping\ table\nSaving\ ns.xsd\ XML\ schema\n\nCompilation\ successful\n------------------------------------------------------------------------\n\ngcc\ q_serv.c\ soapC.c\ soapServer.c\ stdsoap2.c:\n------------------------------------------------------------------------\n11:03:46\nstdsoap2.c:766:30:\ warning:\ adding\ 'int'\ to\ a\ string\ does\ not\ append\ to\ the\ string\ \[-Wstring-plus-int\]\n\ \ \ \ sprintf(t,\ \"\\r\\n%lX\\r\\n\"\ +\ (soap->chunksize\ ?\ 0\ :\ 2),\ (unsigned\ long)n)\;\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/usr/include/secure/_stdio.h:47:56:\ note:\ expanded\ from\ macro\ 'sprintf'\n\ \ __builtin___sprintf_chk\ (str,\ 0,\ __darwin_obsz(str),\ __VA_ARGS__)\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ^\nstdsoap2.c:766:30:\ note:\ use\ array\ indexing\ to\ silence\ this\ warning\n\ \ \ \ sprintf(t,\ \"\\r\\n%lX\\r\\n\"\ +\ (soap->chunksize\ ?\ 0\ :\ 2),\ (unsigned\ long)n)\;\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ^\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ &\ \ \ \ \ \ \ \ \ \ \ \ \ \[\n/usr/include/secure/_stdio.h:47:56:\ note:\ expanded\ from\ macro\ 'sprintf'\n\ \ __builtin___sprintf_chk\ (str,\ 0,\ __darwin_obsz(str),\ __VA_ARGS__)\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ^\nstdsoap2.c:7425:30:\ warning:\ address\ of\ array\ 'tp->name'\ will\ always\ evaluate\ to\ 'true'\ \[-Wpointer-bool-conversion\]\n\ \ \ \ \{\ if\ (tp->visible\ &&\ tp->name)\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ~~\ ~~~~^~~~\n2\ warnings\ generated.\n------------------------------------------------------------------------\n\nKLIENT:\n-------\nq.h:\n------------------------------------------------------------------------\n/*\ q.h\n\ \ \ Generated\ by\ wsdl2h\ 1.2.16\ from\ ../serwer/qqq.wsdl\ and\ typemap.dat\n\ \ \ 2016-01-16\ 15:32:50\ GMT\n\n\ \ \ DO\ NOT\ INCLUDE\ THIS\ FILE\ DIRECTLY\ INTO\ YOUR\ PROJECT\ BUILDS\n\ \ \ USE\ THE\ soapcpp2-GENERATED\ SOURCE\ CODE\ FILES\ FOR\ YOUR\ PROJECT\ BUILDS\n\n\ \ \ gSOAP\ XML\ Web\ services\ tools.\n\ \ \ Copyright\ (C)\ 2001-2010\ Robert\ van\ Engelen,\ Genivia\ Inc.\ All\ Rights\ Reserved.\n\ \ \ Part\ of\ this\ software\ is\ released\ under\ one\ of\ the\ following\ licenses:\n\ \ \ GPL\ or\ Genivia's\ license\ for\ commercial\ use.\n*/\n\n/**\ @page\ page_notes\ Build\ Notes\n\nNOTE:\n\n\ -\ Run\ soapcpp2\ on\ q.h\ to\ generate\ the\ SOAP/XML\ processing\ logic.\n\ \ \ Use\ soapcpp2\ option\ -I\ to\ specify\ paths\ for\ #import\n\ \ \ To\ build\ with\ STL,\ 'stlvector.h'\ is\ imported\ from\ 'import'\ dir\ in\ package.\n\ \ \ Use\ soapcpp2\ option\ -i\ to\ generate\ improved\ proxy\ and\ server\ classes.\n\ -\ Use\ wsdl2h\ options\ -c\ and\ -s\ to\ generate\ pure\ C\ code\ or\ C++\ code\ without\ STL.\n\ -\ Use\ 'typemap.dat'\ to\ control\ namespace\ bindings\ and\ type\ mappings.\n\ \ \ It\ is\ strongly\ recommended\ to\ customize\ the\ names\ of\ the\ namespace\ prefixes\n\ \ \ generated\ by\ wsdl2h.\ To\ do\ so,\ modify\ the\ prefix\ bindings\ in\ the\ Namespaces\n\ \ \ section\ below\ and\ add\ the\ modified\ lines\ to\ 'typemap.dat'\ to\ rerun\ wsdl2h.\n\ -\ Use\ Doxygen\ (www.doxygen.org)\ on\ this\ file\ to\ generate\ documentation.\n\ -\ Use\ wsdl2h\ options\ -nname\ and\ -Nname\ to\ globally\ rename\ the\ prefix\ 'ns'.\n\ -\ Use\ wsdl2h\ option\ -d\ to\ enable\ DOM\ support\ for\ xsd:anyType.\n\ -\ Use\ wsdl2h\ option\ -g\ to\ auto-generate\ readers\ and\ writers\ for\ root\ elements.\n\ -\ Struct/class\ members\ serialized\ as\ XML\ attributes\ are\ annotated\ with\ a\ '@'.\n\ -\ Struct/class\ members\ that\ have\ a\ special\ role\ are\ annotated\ with\ a\ '\$'.\n\nWARNING:\n\n\ \ \ DO\ NOT\ INCLUDE\ THIS\ FILE\ DIRECTLY\ INTO\ YOUR\ PROJECT\ BUILDS.\n\ \ \ USE\ THE\ SOURCE\ CODE\ FILES\ GENERATED\ BY\ soapcpp2\ FOR\ YOUR\ PROJECT\ BUILDS:\n\ \ \ THE\ soapStub.h\ FILE\ CONTAINS\ THIS\ CONTENT\ WITHOUT\ ANNOTATIONS.\n\nLICENSE:\n\n@verbatim\n--------------------------------------------------------------------------------\ngSOAP\ XML\ Web\ services\ tools\nCopyright\ (C)\ 2000-2010,\ Robert\ van\ Engelen,\ Genivia\ Inc.\ All\ Rights\ Reserved.\n\nThis\ software\ is\ released\ under\ one\ of\ the\ following\ two\ licenses:\n1)\ GPL\ or\ 2)\ Genivia's\ license\ for\ commercial\ use.\n--------------------------------------------------------------------------------\n1)\ GPL\ license.\n\nThis\ program\ is\ free\ software\;\ you\ can\ redistribute\ it\ and/or\ modify\ it\ under\nthe\ terms\ of\ the\ GNU\ General\ Public\ License\ as\ published\ by\ the\ Free\ Software\nFoundation\;\ either\ version\ 2\ of\ the\ License,\ or\ (at\ your\ option)\ any\ later\nversion.\n\nThis\ program\ is\ distributed\ in\ the\ hope\ that\ it\ will\ be\ useful,\ but\ WITHOUT\ ANY\nWARRANTY\;\ without\ even\ the\ implied\ warranty\ of\ MERCHANTABILITY\ or\ FITNESS\ FOR\ A\nPARTICULAR\ PURPOSE.\ See\ the\ GNU\ General\ Public\ License\ for\ more\ details.\n\nYou\ should\ have\ received\ a\ copy\ of\ the\ GNU\ General\ Public\ License\ along\ with\nthis\ program\;\ if\ not,\ write\ to\ the\ Free\ Software\ Foundation,\ Inc.,\ 59\ Temple\nPlace,\ Suite\ 330,\ Boston,\ MA\ 02111-1307\ USA\n\nAuthor\ contact\ information:\nengelen@genivia.com\ /\ engelen@acm.org\n--------------------------------------------------------------------------------\n2)\ A\ commercial-use\ license\ is\ available\ from\ Genivia,\ Inc.,\ contact@genivia.com\n--------------------------------------------------------------------------------\n@endverbatim\n\n*/\n\n\n//gsoapopt\ cw\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Definitions\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ qqq\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Import\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Schema\ Namespaces\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/*\ NOTE:\n\nIt\ is\ strongly\ recommended\ to\ customize\ the\ names\ of\ the\ namespace\ prefixes\ngenerated\ by\ wsdl2h.\ To\ do\ so,\ modify\ the\ prefix\ bindings\ below\ and\ add\ the\nmodified\ lines\ to\ typemap.dat\ to\ rerun\ wsdl2h:\n\nns1\ =\ \"qqq\"\n\n*/\n\n#define\ SOAP_NAMESPACE_OF_ns1\ \"qqq\"\n//gsoap\ ns1\ \ \ schema\ namespace:\ qqq\n//gsoap\ ns1\ \ \ schema\ form:\ \ unqualified\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Built-in\ Schema\ Types\ and\ Top-Level\ Elements\ and\ Attributes\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Schema\ Types\ and\ Top-Level\ Elements\ and\ Attributes\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ qqq\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Schema\ Complex\ Types\ and\ Top-Level\ Elements\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ qqq\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n///\ \"qqq\":ArrayOffloat\ is\ a\ complexType\ with\ complexContent\ restriction\ of\ SOAP-ENC:Array.\n///\ SOAP\ encoded\ array\ of\ xs:float\nstruct\ ArrayOffloat\n\{\n///\ Pointer\ to\ array\ of\ float.\n\ \ \ \ float\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *__ptritem\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \;\n///\ Size\ of\ the\ dynamic\ array.\n\ \ \ \ int\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ __size\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \;\n///\ Offset\ for\ partially\ transmitted\ arrays\ (uncomment\ only\ when\ required).\n//\ \ int\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ __offset\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \;\n\}\;\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Additional\ Top-Level\ Elements\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ qqq\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Additional\ Top-Level\ Attributes\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ qqq\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Services\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n//gsoap\ ns1\ \ service\ name:\ \ qqq\ \n//gsoap\ ns1\ \ service\ type:\ \ qqqPortType\ \n//gsoap\ ns1\ \ service\ port:\ \ http://localhost:80\ \n//gsoap\ ns1\ \ service\ namespace:\ qqq\ \n//gsoap\ ns1\ \ service\ transport:\ http://schemas.xmlsoap.org/soap/http\ \n\n/**\ @mainpage\ qqq\ Definitions\n\n@section\ qqq_bindings\ Service\ Bindings\n\ \ -\ @ref\ qqq\n\n@section\ qqq_more\ More\ Information\n-\ @ref\ page_notes\ \"Notes\"\n-\ @ref\ page_XMLDataBinding\ \"XML\ Data\ Binding\"\n-\ @ref\ SOAP_ENV__Header\ \"SOAP\ Header\ Content\"\n-\ @ref\ SOAP_ENV__Detail\ \"SOAP\ Fault\ Detail\ Content\"\ (when\ applicable)\n\n\n*/\n\n/**\n\n@page\ qqq\ Binding\ \"qqq\"\n\n@section\ qqq_service\ Service\ Documentation\ \"qqq\"\ngSOAP\ 2.7.16\ generated\ service\ definition\n\n@section\ qqq_operations\ Operations\ of\ Binding\ \ \"qqq\"\n\ \ -\ @ref\ ns1__pomnozRazy2\n\n@section\ qqq_ports\ Endpoints\ of\ Binding\ \ \"qqq\"\n\ \ -\ http://localhost:80\n\nNote:\ use\ wsdl2h\ option\ -N\ to\ change\ the\ service\ binding\ prefix\ name\n\n*/\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Service\ Binding\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ qqq\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ Service\ Operation\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ ns1__pomnozRazy2\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n///\ Operation\ response\ struct\ \"ns1__pomnozRazy2Response\"\ of\ service\ binding\ \"qqq\"\ operation\ \"ns1__pomnozRazy2\"\nstruct\ ns1__pomnozRazy2Response\n\{\n\ \ \ \ struct\ ArrayOffloat*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return_\;\n\}\;\n\n///\ Operation\ \"ns1__pomnozRazy2\"\ of\ service\ binding\ \"qqq\"\n\n/**\n\nOperation\ details:\n\nService\ definition\ of\ function\ ns__pomnozRazy2\n\ \ -\ SOAP\ RPC\ encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"\n\nC\ stub\ function\ (defined\ in\ soapClient.c\[pp\]\ generated\ by\ soapcpp2):\n@code\n\ \ int\ soap_call_ns1__pomnozRazy2(\n\ \ \ \ struct\ soap\ *soap,\n\ \ \ \ NULL,\ //\ char\ *endpoint\ =\ NULL\ selects\ default\ endpoint\ for\ this\ operation\n\ \ \ \ NULL,\ //\ char\ *action\ =\ NULL\ selects\ default\ action\ for\ this\ operation\n\ \ \ \ //\ request\ parameters:\n\ \ \ \ struct\ ArrayOffloat*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ par,\n\ \ \ \ //\ response\ parameters:\n\ \ \ \ struct\ ns1__pomnozRazy2Response*\n\ \ )\;\n@endcode\n\nC\ server\ function\ (called\ from\ the\ service\ dispatcher\ defined\ in\ soapServer.c\[pp\]):\n@code\n\ \ int\ ns1__pomnozRazy2(\n\ \ \ \ struct\ soap\ *soap,\n\ \ \ \ //\ request\ parameters:\n\ \ \ \ struct\ ArrayOffloat*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ par,\n\ \ \ \ //\ response\ parameters:\n\ \ \ \ struct\ ns1__pomnozRazy2Response*\n\ \ )\;\n@endcode\n\n*/\n\n//gsoap\ ns1\ \ service\ method-style:\ \ pomnozRazy2\ rpc\n//gsoap\ ns1\ \ service\ method-encoding:\ pomnozRazy2\ http://schemas.xmlsoap.org/soap/encoding/\n//gsoap\ ns1\ \ service\ method-action:\ pomnozRazy2\ \"\"\nint\ ns1__pomnozRazy2(\n\ \ \ \ struct\ ArrayOffloat*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ par,\ \ ///<\ Request\ parameter\n\ \ \ \ struct\ ns1__pomnozRazy2Response\ \ \ \ *\ \ ///<\ Response\ struct\ parameter\n)\;\n\n/******************************************************************************\\\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ XML\ Data\ Binding\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *\n\\******************************************************************************/\n\n\n/**\n\n@page\ page_XMLDataBinding\ XML\ Data\ Binding\n\nSOAP/XML\ services\ use\ data\ bindings\ contractually\ bound\ by\ WSDL\ and\ auto-\ngenerated\ by\ wsdl2h\ and\ soapcpp2\ (see\ Service\ Bindings).\ Plain\ data\ bindings\nare\ adopted\ from\ XML\ schemas\ as\ part\ of\ the\ WSDL\ types\ section\ or\ when\ running\nwsdl2h\ on\ a\ set\ of\ schemas\ to\ produce\ non-SOAP-based\ XML\ data\ bindings.\n\nThe\ following\ readers\ and\ writers\ are\ C/C++\ data\ type\ (de)serializers\ auto-\ngenerated\ by\ wsdl2h\ and\ soapcpp2.\ Run\ soapcpp2\ on\ this\ file\ to\ generate\ the\n(de)serialization\ code,\ which\ is\ stored\ in\ soapC.c\[pp\].\ Include\ \"soapH.h\"\ in\nyour\ code\ to\ import\ these\ data\ type\ and\ function\ declarations.\ Only\ use\ the\nsoapcpp2-generated\ files\ in\ your\ project\ build.\ Do\ not\ include\ the\ wsdl2h-\ngenerated\ .h\ file\ in\ your\ code.\n\nXML\ content\ can\ be\ retrieved\ from:\n\ \ -\ a\ FILE*\ fd,\ using\ soap->recvfd\ =\ fd\n\ \ -\ a\ socket,\ using\ soap->socket\ =\ ...\n\ \ -\ a\ C++\ stream,\ using\ soap->is\ =\ ...\n\ \ -\ a\ buffer,\ using\ the\ soap->frecv()\ callback\n\nXML\ content\ can\ be\ stored\ to:\n\ \ -\ a\ FILE*\ fd,\ using\ soap->sendfd\ =\ fd\n\ \ -\ a\ socket,\ using\ soap->socket\ =\ ...\n\ \ -\ a\ C++\ stream,\ using\ soap->os\ =\ ...\n\ \ -\ a\ buffer,\ using\ the\ soap->fsend()\ callback\n\n\n@section\ ns1\ Top-level\ root\ elements\ of\ schema\ \"qqq\"\n\n*/\n\n/*\ End\ of\ q.h\ */\n------------------------------------------------------------------------\n\nq.c:\n------------------------------------------------------------------------\n#include\ \"qqq.nsmap\"\n#include\ <stdio.h>\n\nint\ main()\ \n\{\ \n\ \ \ struct\ soap\ soap\;\ \n\ \ \ soap_init(&soap)\;\ //\ initialize\ runtime\ environment\ \n\ \ \ \n\ \ \ struct\ ns_pomnozRazy2Response\ \{\n\ \ \ \ \ \ struct\ ArrayOffloat\ *\ return_\;\n\ \ \ \}\;\n\n\ \ \ struct\ ArrayOffloat\ ar\;\n\ \ \ struct\ ns_pomnozRazy2Response\ ar2\;\n\ \ \ \n\ \ \ //\ przygotowanie\ danych\ wejsciowych\ ...\n\ \ \ const\ int\ dlugosc=55\;\n\ \ \ ar.__ptritem=\ soap_malloc(&soap,\ dlugosc*sizeof(float))\;\ \n\ \ \ \ \ \ //\ dane\ tak\ alokowane\ beda\ automatycznie\ zwalniane\ przy\ soap_end()\n\ \ \ ar.__size=\ dlugosc\;\n\ \ \ int\ i\;\n\ \ \ for(i=0\;\ i<dlugosc\;\ i++)\ ar.__ptritem\[i\]=\ i+1\;\n\n\ \ \ //\ wywo³anie\ operacji\ ...\n\ \ \ //\ -\ adres\ serwera\ to\ \"http://localhost:8015/soap/qqq/go\"\ \ \ \n\ \ \ if(\ soap_call_ns1__pomnozRazy2(&soap,\ \n\ \ \ \ \ \ \ \ \ \"http://localhost:10000/soap/qqq/go\",\ \"\",\ &ar,\ &ar2)\ !=SOAP_OK\ )\ \{\n\ \ \ \ \ \ \ soap_print_fault(&soap,\ stderr)\;\n\ \ \ \ \ \}\n\n\ \ \ //\ pokazanie\ argumentu\ i\ wyniku:\n\ \ \ int\ d\;\n\ \ \ printf(\"argument:\\n\")\;\ d=\ ar.__size\;\n\ \ \ for(i=0\;\ i<d\;\ i++)\ printf(\"%f\ \",\ ar.__ptritem\[i\])\;\ printf(\"\\n\")\;\n\ \ \ printf(\"wynik:\\n\")\;\ d=\ ar2.return_->__size\;\n\ \ \ for(i=0\;\ i<d\;\ i++)\ printf(\"%f\ \",\ ar2.return_->__ptritem\[i\])\;\ printf(\"\\n\")\;\n\n\ \ \ //\ zwalnianie\ pamiecie\ i\ inne\ ...\n\ \ \ soap_end(&soap)\;\ //\ clean\ up\ and\ remove\ deserialized\ data\ \n\ \ \ soap_done(&soap)\;\ //\ detach\ environment\ (last\ use\ and\ no\ longer\ in\ scope)\n\ \ \ \n\ \ \ return\ 0\;\n\}\n------------------------------------------------------------------------\n\nqqq.wsdl:\n------------------------------------------------------------------------\n<?xml\ version=\"1.0\"\ encoding=\"UTF-8\"?>\n<definitions\ name=\"qqq\"\n\ targetNamespace=\"qqq\"\n\ xmlns:tns=\"qqq\"\n\ xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n\ xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\n\ xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\ xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n\ xmlns:ns=\"qqq\"\n\ xmlns:SOAP=\"http://schemas.xmlsoap.org/wsdl/soap/\"\n\ xmlns:HTTP=\"http://schemas.xmlsoap.org/wsdl/http/\"\n\ xmlns:MIME=\"http://schemas.xmlsoap.org/wsdl/mime/\"\n\ xmlns:DIME=\"http://schemas.xmlsoap.org/ws/2002/04/dime/wsdl/\"\n\ xmlns:WSDL=\"http://schemas.xmlsoap.org/wsdl/\"\n\ xmlns=\"http://schemas.xmlsoap.org/wsdl/\">\n\n<types>\n\n\ <schema\ targetNamespace=\"qqq\"\n\ \ xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n\ \ xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\n\ \ xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\ \ xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n\ \ xmlns:ns=\"qqq\"\n\ \ xmlns=\"http://www.w3.org/2001/XMLSchema\"\n\ \ elementFormDefault=\"unqualified\"\n\ \ attributeFormDefault=\"unqualified\">\n\ \ <import\ namespace=\"http://schemas.xmlsoap.org/soap/encoding/\"/>\n\ \ <complexType\ name=\"ArrayOffloat\">\n\ \ \ <complexContent>\n\ \ \ \ <restriction\ base=\"SOAP-ENC:Array\">\n\ \ \ \ \ <sequence>\n\ \ \ \ \ \ <element\ name=\"item\"\ type=\"xsd:float\"\ minOccurs=\"0\"\ maxOccurs=\"unbounded\"\ nillable=\"false\"/>\n\ \ \ \ \ </sequence>\n\ \ \ \ \ <attribute\ ref=\"SOAP-ENC:arrayType\"\ WSDL:arrayType=\"ArrayOffloat\[\]\"/>\n\ \ \ \ </restriction>\n\ \ \ </complexContent>\n\ \ </complexType>\n\ </schema>\n\n</types>\n\n<message\ name=\"pomnozRazy2Request\">\n\ <part\ name=\"par\"\ type=\"ns:ArrayOffloat\"/><!--\ ns__pomnozRazy2::par\ -->\n</message>\n\n<message\ name=\"pomnozRazy2Response\">\n\ <part\ name=\"return\"\ type=\"ns:ArrayOffloat\"/><!--\ ns__pomnozRazy2::return_\ -->\n</message>\n\n<portType\ name=\"qqqPortType\">\n\ <operation\ name=\"pomnozRazy2\">\n\ \ <documentation>Service\ definition\ of\ function\ ns__pomnozRazy2</documentation>\n\ \ <input\ message=\"tns:pomnozRazy2Request\"/>\n\ \ <output\ message=\"tns:pomnozRazy2Response\"/>\n\ </operation>\n</portType>\n\n<binding\ name=\"qqq\"\ type=\"tns:qqqPortType\">\n\ <SOAP:binding\ style=\"rpc\"\ transport=\"http://schemas.xmlsoap.org/soap/http\"/>\n\ <operation\ name=\"pomnozRazy2\">\n\ \ <SOAP:operation\ style=\"rpc\"\ soapAction=\"\"/>\n\ \ <input>\n\ \ \ \ \ <SOAP:body\ use=\"encoded\"\ namespace=\"qqq\"\ encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"/>\n\ \ </input>\n\ \ <output>\n\ \ \ \ \ <SOAP:body\ use=\"encoded\"\ namespace=\"qqq\"\ encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"/>\n\ \ </output>\n\ </operation>\n</binding>\n\n<service\ name=\"qqq\">\n\ <documentation>gSOAP\ 2.8.27\ generated\ service\ definition</documentation>\n\ <port\ name=\"qqq\"\ binding=\"tns:qqq\">\n\ \ <SOAP:address\ location=\"http://localhost:80\"/>\n\ </port>\n</service>\n\n</definitions>\n------------------------------------------------------------------------\n\nsoapcpp2\ -C\ -c\ q.h\ http://localhost:10000/soap/qqq/wsdl:\n------------------------------------------------------------------------\n**\ \ The\ gSOAP\ WSDL/Schema\ processor\ for\ C\ and\ C++,\ wsdl2h\ release\ 1.2.16\n**\ \ Copyright\ (C)\ 2000-2010\ Robert\ van\ Engelen,\ Genivia\ Inc.\n**\ \ All\ Rights\ Reserved.\ This\ product\ is\ provided\ \"as\ is\",\ without\ any\ warranty.\n**\ \ The\ wsdl2h\ tool\ is\ released\ under\ one\ of\ the\ following\ two\ licenses:\n**\ \ GPL\ or\ the\ commercial\ license\ by\ Genivia\ Inc.\ Use\ option\ -l\ for\ more\ info.\n\nSaving\ q.h\n\nCannot\ open\ file\ 'typemap.dat'\nProblem\ reading\ type\ map\ file\ 'typemap.dat'.\nUsing\ internal\ type\ definitions\ for\ C\ instead.\n\n\nReading\ file\ 'qqq.wsdl'...\ done\ reading\ 'qqq.wsdl'\n\nTo\ complete\ the\ process,\ compile\ with:\nsoapcpp2\ q.h\n-------------------------------------------------------------\n\nSerwer\ TCL:\n-------------------------------------------------------------\nlappend\ auto_path\ ./tclws\ ./tcllib\ ./tdom\npackage\ re\ WS::Server\npackage\ re\ WS::Embeded\n::WS::Server::Service\ -mode\ embedded\ -service\ qqq\ -ports\ 10000\n\n::WS::Server::ServiceProc\ qqq\ \{razyDwa\ \{type\ int()\}\}\ \{\n\ \ par1\ \{type\ int()\ comment\ \{ciag\ liczb\ int\}\}\n\}\ \{mnozy\ elementy\ ciagu\ razy\ 2\}\ \{\n\ \ set\ w\ \{\}\n\ \ foreach\ e\ \$par1\ \{lappend\ w\ \[expr\ \{\$e*2\}\]\}\n\ \ return\ \[list\ razyDwaResult\ \$w\]\n\}\n\n::WS::Embeded::Listen\ 10000\n\nvwait\ qqq\n-------------------------------------------------------------\nKlient\ TCL:\n\n#wm\ withdraw\ .\;\ wm\ withdraw\ .output\;\ wm\ geom\ .konsola\ 759x525+75+75\;\nlappend\ auto_path\ ./tclws\ ./tcllib\ ./tdom\npackage\ re\ WS::Client\n\ \ #%\ 2.3.7\n\nset\ w1\ \[::WS::Client::GetAndParseWsdl\ http://localhost:10000/service/qqq/wsdl\]\ndict\ get\ \$w1\ name\ndict\ get\ \$w1\ location\n::WS::Client::CreateStubs\ qqq\n\nset\ r1\ \[qqq::razyDwa\ \{1\ 2\ 3\}\]\nputs\ \$r1\n------------------------------------------------------------------------\ntclsh\ klient.tcl:\n\ \ razyDwaResult\ \{2\ 4\ 6\}\n\nZadanie\ 41\ --------------------------------------------------\n\nq.h:\n\n//gsoap\ ns\ service\ name:\ qqq\n//gsoap\ ns\ service\ namespace:\ qqq\n\n//\ gsoap\ ns\ service\ style:\ rpc\n//\ gsoap\ ns\ service\ encoding:\ encoded\n//gsoap\ ns\ service\ style:\ document\n//gsoap\ ns\ service\ encoding:\ literal\n\nstruct\ ns__t_tab\ \{\n\ \ float\ *__ptr\;\n\ \ int\ __size\;\n\}\;\nstruct\ ns__int\ \{\n\ \ int\ __val\;\n\}\;\nint\ ns__iloczynSkalarny(struct\ ns__t_tab\ tab1,\ struct\ ns__t_tab\ tab2,\ struct\ ns__int\ *return_)\;\n------------------------------------------------------------------------\n\nq_serv.c:\n\n#include\ \"qqq.nsmap\"\n\ \ //\ ten\ plik\ wlacza\ tez\ inne\ pliki\ nag³ówkowe!\n\nint\ main()\ \{\n\ \ struct\ soap\ soap\;\n\ \ soap_init(&soap)\;\n\n\ \ int\ b=soap_bind(&soap,\ NULL,\ 10000,\ 100)\;\ \n\ \ \ \ \ //\ 10000\ -nr\ portu\ na\ ktorym\ serwer\ czeka\ na\ klientow\n\ \ if(b<0)\ \{soap_print_fault(&soap,\ stderr)\;\ soap_done(&soap)\;\ exit(1)\;\}\n\n\ \ printf(\"Serwer\ dziala\\n\")\;\n\n\ \ while\ (1)\ \{\n\ \ \ \ soap_accept(&soap)\;\ //\ czeka\ na\ soap\ msg\n\ \ \ \ soap_serve(&soap)\;\ //\ obsluga\ klienta\n\ \ \ \ \ \ //\ UWAGA:\ mo¿na\ w\ tym\ miejscu\ tworzyc\ w±tek\ POSIX\ i\ przekazywaæ\ mu\ obs³ugê\ klienta\ !!!\n\ \ \ \ soap_end(&soap)\;\ //\ zwalnianie\ pamieci\n\ \ \ \ printf(\".\")\;\ fflush(stdout)\;\n\ \ \}\n\n\ \ return\ 0\;\n\}\n\n//\ implementacja\ operacji\ \"pomnozRazy2\"\nint\ ns__iloczynSkalarny(struct\ soap*\ soap,\n\ \ \ \ struct\ ns__t_tab\ tab1,\ struct\ ns__t_tab\ tab2,\ struct\ ns__int\ *return_)\ \{\n\ \ int\ i\;\n\n\ \ int\ d=\ tab1.__size\;\ float\ *f1=\ tab1.__ptr\;\n\n\ \ printf(\"serwer/dbg:\ argument:\\n\")\;\n\ \ for(i=0\;\ i<d\;\ i++)\ printf(\"%f\ \",\ tab1.__ptr\[i\])\;\ printf(\"\\n\")\;\n\ \ for(i=0\;\ i<d\;\ i++)\ printf(\"%f\ \",\ tab2.__ptr\[i\])\;\ printf(\"\\n\")\;\n\n\ \ //\ zakladam\ ze\ return_\ wskazuje\ na\ istniejaca\ struct\ ns__t_tab\ !!!\n\ \ int\ result\;\n\n\ \ for(i=0\;\ i<d\;\ i++)\ result\ +=\ (tab1.__ptr\[i\]\ *\ tab2.__ptr\[i\])\;\n\ \ printf(\"%d\ \",\ result)\;\n\ \ return_->__val\ =\ result\;\n\n\ \ return\ SOAP_OK\;\n\}\n------------------------------------------------------------------------\n\n./a.out:\n\nSerwer\ dziala\nserwer/dbg:\ argument:\n1.000000\ 2.000000\ 3.000000\ 4.000000\ 5.000000\n2.000000\ 3.000000\ 5.000000\ 7.000000\ 8.000000\n91\ .\n------------------------------------------------------------------------\n\n\nwsimport\ -keep\ qqq.wsdl\ \nGenerating\ code...\nCompiling\ code...\n------------------------------------------------------------------------\n\nKLIENT:\n\nMain.java:\n\nimport\ qqq.*\;\n\nimport\ java.util.Arrays\;\n\npublic\ class\ Main\ \{\n\n\ \ \ \ public\ static\ void\ main(String\[\]\ args)\ \{\n\ \ \ \ \ \ \ \ Qqq\ qqq\ =\ new\ Qqq()\;\n\ \ \ \ \ \ \ \ QqqPortType\ qqqPortType\ =\ qqq.getQqq()\;\n\ \ \ \ \ \ \ \ TTab\ tab1\ =\ new\ TTab()\;\n\ \ \ \ \ \ \ \ TTab\ tab2\ =\ new\ TTab()\;\n\ \ \ \ \ \ \ \ tab1.getItem().addAll(Arrays.asList(1f,\ 2f,\ 3f,\ 4f,\ 5f)\;\n\ \ \ \ \ \ \ \ tab2.getItem().addAll(Arrays.asList(2f,\ 3f,\ 5f,\ 7f,\ 8f))\;\n\ \ \ \ \ \ \ \ //\ for\ (int\ i\ =\ 0\;\ i\ <\ 5\;\ i++)\ \{\n\ \ \ \ \ \ \ \ //\ \ \ \ \ tab1.set(i,\ i)\;\n\ \ \ \ \ \ \ \ //\ \ \ \ \ Array.set(tab2,\ i,\ i)\;\n\ \ \ \ \ \ \ \ //\ \}\n\ \ \ \ \ \ \ \ IloczynSkalarny\ is\ =\ new\ IloczynSkalarny()\;\n\ \ \ \ \ \ \ \ is.setTab1(tab1)\;\n\ \ \ \ \ \ \ \ is.setTab2(tab2)\;\n\ \ \ \ \ \ \ \ Int\ val\ =\ qqqPortType.iloczynSkalarny(is)\;\n\ \ \ \ \}\n\}\n\n------------------------------------------------------------------------\njavac\ -cp\ .\ Main.java\n
