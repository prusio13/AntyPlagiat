przedmiot TAS temat D nr_indeksu 384283 liczba_pkt 5 

\n\nZADANIE\ 40\ --------------------------------\n\nZaprogramuj\ aplikacje\ SOAP\ z\ metod±\ \"pomnozRazy2\"\ mono¿±c±\ i\ zwracaj±c±\ ci±g\ liczb\ float\ dowolnej\ d³ugo¶ci\;\nklienci\ SOAP:\ 2\ klientów:\ gsoap\ i\ tclsoap\nserwer\ SOAP:\ dowolny\ (najpro¶ciej\ tclsoap)\n\n--------------plik\ q.c---------------------\n\n#include\ \"qqqSoap.nsmap\"\n#include\ <stdio.h>\n\nint\ main()\ \n\{\ \n\ \ \ struct\ soap\ soap\;\ \n\ \ \ soap_init(&soap)\;\n\ \ \ \n\ \ \ struct\ ns1__razyDwaREQUESTuest\ ar\;\n\ \ \ struct\ ns1__razyDwaResults\ ar2\;\n\ \ \ \n\ \ \ \ \ \ \ \ const\ int\ dlugosc\ =\ 20\;\n\ \ \ \ \ \ \ \ ar.par1=\ soap_malloc(&soap,\ dlugosc*sizeof(float))\;\ \n\ \ \ \ \ \ \ \ \n\ \ \ \ \ \ \ \ ar.__sizepar1\ \ =\ dlugosc\;\n\ \ \ \ \ \ \ \ for(int\ i=0\;\ \ i<dlugosc\;\ i++)\ \{\ ar.par1\[i\]=\ i+1\;\ \}\n\n\ \ \ \ \ \ \ \ if(\ soap_call___ns1__razyDwa(&soap,\ NULL,\ NULL,\ \ &ar,\ &ar2)\ !=SOAP_OK\ )\ \{\n\ \ \ \ \ \ \ \ \ \ \ \ soap_print_fault(&soap,\ stderr)\;\n\ \ \ \ \ \ \ \ \}\n\n\ \ \ \ \ \ \ \ for(int\ i\ =\ 0\;\ i\ <\ ar.__sizepar1\;\ i++)\ \{\n\ \ \ \ \ \ \ \ \ \ \ \ printf(\"%d\ \",\ ar.par1\[i\])\;\n\ \ \ \ \ \ \ \ \}\n\ \ \ \n\ \ \ \ \ \ \ \ for(int\ i\ =\ 0\;\ i\ <\ ar2.__sizerazyDwaResult\;\ i++)\ \ \{\n\ \ \ \ \ \ \ \ \ \ \ \ printf(\"%d\ \",\ ar2.razyDwaResult\[i\])\;\n\ \ \ \ \ \ \ \ \}\n\n\ \ \ soap_end(&soap)\;\n\ \ \ soap_done(&soap)\;\n\ \ \ \n\ \ \ return\ 0\;\n\}\n\n------------------------------Wydruki---------------------------------------\n\n------------------------------Klient----------------------------------------\n\n1\ 2\ 3\ 4\ 5\ 6\ 7\ 8\ 9\ 10\ 11\ 12\ 13\ 14\ 15\ 16\ 17\ 18\ 19\ 20\n2\ 4\ 6\ 8\ 10\ 12\ 14\ 16\ 18\ 20\ 22\ 24\ 26\ 28\ 30\ 32\ 34\ 36\ 38\ 40\n\nZADANIE\ 41\ --------------------------------\n\nZaprogramuj\ WebSerwis\ z\ metod±\ \"pomnozDrowmatrixierze\"\ mno¿±c±\ drow\ podane\ matrixierze\ (o\ dowolnych\ wymiarach)\ni\ zwracajac±\ wynik\ w\ postaci\ matrixierzy.\nserwer:\ gsoap\;\ wygenerowany\ plik\ wsdl\ ma\ byc\ udostêpniony\ klientom!\nklient:\ java/axis,\ pieniek\ wygenerowany\ aoutomatycznie\ z\ pliku\ wsdl,\nwyprobuj\ takze\ klienta\ tclsoap\ (bez\ wsparcia\ wsdl!)\n\n------------------------------q.h------------------------------\n\ \ \ \ struct\ \ t_seq\ \ \{\n\ \ \ \ \ \ \ \ int\ \ *__ptr\;\ \ \n\ \ \ \ \ \ \ \ int\ \ __size\;\n\ \ \ \ \}\;\n\n\ \ \ \ struct\ \ t_matrixierz\ \ \{\n\ \ \ \ \ \ \ \ struct\ \ t_seq\ \ data\;\ \ \n\ \ \ \ \ \ \ \ int\ \ row,col\;\n\ \ \ \ \}\;\n\n\ \ \ \ struct\ \ ns__razymatrixierzResponse\ \ \{\n\t\ \ \ \ struct\ \ t_matrixierz*\ \ return_\;\n\ \ \ \ \}\;\n\n\ \ \ \ int\ \ ns__razymatrixierz(struct\ \ t_matrixierz\ \ matrix,\ \ struct\ \ t_matrixierz\ \ matrix2,\ \ struct\ \ ns__razymatrixierzResponse*\ \ return_)\;\n\n-----------------------------q.c--------------------------------\n#include\ \ \"qqq.nsmap\"\n\nint\ \ main()\ \ \{\n\ \ \ \ struct\ \ soap\ \ soap\;\n\ \ \ \ soap_init(&soap)\;\n\n\ \ \ \ int\ \ b\ =\ soap_bind(&soap,\ \ NULL,\ \ 10000,\ \ 100)\;\ \ \n\ \ \ \ if\ (b<0)\ \ \{\ \n\ \ \ \ \ \ \ \ soap_print_fault(&soap,\ \ stderr)\;\n\ \ \ \ \ \ \ \ soap_done(&soap)\;\n\ \ \ \ \ \ \ \ exit(1)\;\n\ \ \ \ \}\n\n\ \ \ \ while\ \ (1)\ \ \{\n\ \ \ \ \ \ \ \ soap_accept(&soap)\;\n\ \ \ \ \ \ \ \ soap_serve(&soap)\;\n\n\ \ \ \ \ \ \ \ soap_end(&soap)\;\n\ \ \ \ \ \ \ \ printf(\".\")\;\n\ \ \ \ \ \ \ \ fflush(stdout)\;\n\ \ \ \ \}\n\n\ \ \ \ return\ \ 0\;\n\}\n\nint\ \ ns__razymatrixierz(\ \ struct\ \ soap*\ \ soap,\ \ struct\ \ t_matrixierz\ \ matrix,\ \ struct\ \ t_matrixierz\ \ matrix2,\ \ struct\ \ ns__razymatrixierzResponse*\ return)\ \ \{\ \ \ \ \n\ \ \ \ return_->return_\ \ =\ \ soap_malloc(soap,\ \ sizeof(struct\ \ t_matrixierz))\;\n\ \ \ \ return_->return_->row\ \ =\ \ matrix.row\;\n\ \ \ \ return_->return_->col\ \ =\ \ matrix2.col\;\n\ \ \ \ return_->return_->data.__ptr\ \ =\ \ soap_malloc(soap,\ \ \ matrix.row\ *\ matrix2.col\ *\ sizeof(int))\;\n\ \ \ \ return_->return_->data.__size\ \ =\ \ matrix.row\ *\ matrix2.col\;\n\n\ \ \ \ for(int\ \ i\ =\ 0\;\ i\ <\ matrix.row\;\ i++)\ \{\n\n\t\ \ \ \ for(int\ j\ =\ 0\;\ j\ <\ matrix2.col\;\ j++)\ \{\n\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return_->return_->data.__ptr\[i\ *\ matrix2.col\ +\ j\]\ =\ 0\;\ \ \n\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ for(int\ k\ =\ 0\;\ \ k\ <\ matrix.col\;\ \ k++)\ \{\n\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return_->return_->data.__ptr\[i\ *\ matrix2.col\ +\ j\]\ +=\ \ \n\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matrix.data.__ptr\[i\ *\ matrix.col\ +\ \ k\]\ *\ matrix2.data.__ptr\[k\ *\ matrix2.col\ +\ j\]\;\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\n\ \ \ \ \ \ \ \ \}\n\ \ \ \ \}\n\n\ \ \ \ return\ \ SOAP_OK\;\n\}\n\n-----------------------------k.java--------------------------------\nimport\ \ qqq_pkg.*\;\nimport\ \ java.util.*\;\n\npublic\ \ class\ \ k\ \{\n\ \ \ \ public\ \ static\ \ void\ \ main(String\ \ args\[\])\ \{\n\ \ \ \ \ \ \ \ \ \ \n\n\ \ \ \ \ \ \ \ try\ \ \{\n\t\ \ \ \ \ \ \ \ qqq_pkg.QqqLocator\ \ loc\ \ =\ \ new\ \ qqq_pkg.QqqLocator()\;\n\t\n\t\ \ \ \ \ \ \ \ int\[\]\ \ array\ \ =\ \ new\ \ int\[9\]\;\n\t\ \ \ \ \ \ \ \ \n\ \ \ \ \ \ \ \ \ \ \ \ for(int\ i\ =\ 0\;\ i\ <\ 9\;\ i++)\ \{\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ array\[i\]\ =\ 1\;\n\ \ \ \ \ \ \ \ \ \ \ \ \}\n\t\n\ \ \ \ \ \ \ \ \ \ \ \ int\[\]\ array3\ =\ new\ int\[9\]\;\n\t\ \ \ \ \ \ \ \ for(int\ i\ =\ 0\;\ i\ <\ 9\;\ i++)\ \{\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ array3\[i\]\ \ =\ \ 2\;\n\ \ \ \ \ \ \ \ \ \ \ \ \}\n\n\t\ \ \ \ \ \ \ \ qqq_pkg.Tmatrixierz\ \ matrix\ \ =\ \ new\ \ qqq_pkg.Tmatrixierz(array,\ 3,\ 3)\;\n\t\ \ \ \ \ \ \ \ qqq_pkg.Tmatrixierz\ \ matrix1\ \ =\ \ new\ \ qqq_pkg.Tmatrixierz(array3,\ 3,\ 3)\;\n\n\t\ \ \ \ \ \ \ \ qqq_pkg.QqqPortType\ \ obiekt\ \ =\ \ loc.getqqq(\ \ )\;\n\t\ \ \ \ \ \ \ \ qqq_pkg.Tmatrixierz\ \ res\ \ =\ \ obiekt.razymatrixierz(\ \ matrix,\ \ matrix1\ \ )\;\n\n\t\ \ \ \ \ \ \ \ int\[\]\ \ array2\ \ =\ \ res.getData()\;\n\t\ \ \ \ \ \ \ \ int\ \ k\ \ =\ \ res.getcol()\;\n\t\ \ \ \ \ \ \ \ int\ \ w\ \ =\ \ res.getrow()\;\n\n\t\ \ \ \ \ \ \ \ for(int\ i\ =\ 0\;\ i\ <\ res.getcol()\;\ i++)\ \ \ \{\n\t\t\ \ \ \ \ \ \ \ for(int\ j\ =\ 0\;\ j\ <\ res.getrow()\;\ j++)\ \{\n\t\t\t\ \ \ \ \ \ \ \ System.out.print(array2\[\ j*res.getcol()\ +\ i\])\;\n\t\t\t\ \ \ \ \ \ \ \ System.out.print(\"\ \ \")\;\n\t\t\ \ \ \ \ \ \ \ \}\n\ \ \ \ \ \ \ \ \ \ \ \ System.out.print(\ \ \"\\n\"\ \ )\;\n\ \ \ \ \ \ \ \ \t\}\n\n\ \ \ \ \ \ \ \ \ \ \}\ \ catch\ \ (\ \ Exception\ \ e\ \ )\ \ \{\n\t\ \ System.err.print(\ \ \"error\"\ \ +\ \ e.getMessage()\ \ +\ \ \"\\n\"\ \ )\;\n\ \ \ \ \ \ \ \ \ \ \}\n\ \ \ \ \}\n\}\n-------------------------------server--------------------------\ns384283@lts:~/Desktop/TAS/TematD/Zad41\$\ \ ./a.out\ \ \nserwer/dbg:\ \ argument:\ \ ###\ \ oznacza\ \ ze\ \ serwer\ \ przyjal\ \ zadanie\ \ i\ \ wywowa³\ \ zdaln±\ \ procedurê\n\n-------------------------------klient-------------------------\n\n2\ \ 2\n6\ \ 6\ \ \n6\ \ 6\n\nZADANIE\ 43\ -------------------------------\n\nZaprogramuj\ niskopoziomowo\ (bez\ u¿ycia\ ¿adnych\ pakietów\ soap)\ klienta\ SOAP\ do\ serwera\ z\ zadania\ 40\ (pomnozRazy2)\;\nu¿yj\ jêzyka\ innego\ ni¿\ tcl\ (bo\ rozwi±zanie\ tcl\ jest\ w\ przyk³adzie).\n\n\n--------------------obs³uga\ webservice------------------------\n\n#include\ \ <iostream>\n#include\ \ <istream>\n#include\ \ <ostream>\n#include\ \ <string>\n#include\ \ <cstdio>\n#include\ \ <vector>\n#include\ \ <regex>\n#include\ \ <boost/asio.hpp>\n\nusing\ \ boost::asio::ip::tcp\;\nusing\ \ namespace\ \ std\;\n\nstring\ REQUEST\ =\ \"\\<?xml\ \ version=\\\"1.0\\\"\ \ encoding=\\\"UTF-8\\\"?>\\<SOAP-ENV:Envelope\\\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xmlns:SOAP-ENV=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\"\\\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xmlns:SOAP-ENC=\\\"http://schemas.xmlsoap.org/soap/encoding/\\\"\\\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\\\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xmlns:xsd=\\\"http://www.w3.org/2001/XMLSchema\\\"\\\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xmlns:ns1=\\\"http://127.0.0.1:8080/service/qqq\\\">\\\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <SOAP-ENV:Body>\\<ns1:razyDwarequest\ \ xsi:type=\\\"ns1:razyDwarequest\\\">\"\;\n\ \ \nstring\ ADD\ =\ \"</ns1:razyDwaREQUESTuest>\\</SOAP-ENV:Body>\\</SOAP-ENV:Envelope>\"\;\n\n\nint\ \ main(int\ \ argc,\ \ char*\ \ argv\[\])\{\n\n\ \ \ \ int\ \ number\;\n\ \ \ \ scanf(\"%d\",&number)\;\n\n\ \ \ \ for\ (int\ i\ =\ 0\;\ i\ <\ number\;\ i++)\ \{\n\t\ \ \ \ int\ \ a\;\n\ \ \ \ \ \ \ \ scanf(\"%d\",&a)\;\n\ \ \ \ \ \ \ \ \n\t\t\ \ \ \ REQUEST\ +=\ \"<ns1:par1\ \ xsi:type=\\\"xsd:int\\\">\"\;\n\ \ \ \ \ \ \ \ \ \ \ \ REQUEST\ +=\ std::to_string(a)\;\n\ \ \ \ \ \ \ \ \ \ \ \ REQUEST\ +=\ \"</ns1:par1>\"\;\n\ \ \ \ \}\n\n\ \ \ \ REQUEST\ \ +=\ \ ADD\;\n\ \ \ \ string\ \ res\;\n\ \ \ \ string\ \ res_tmp\;\n\n\ \ \ \ try\ \{\n\n\ \ \ \ \ \ \ \ boost::asio::io_service\ \ io_service\;\n\ \ \ \ \ \ \ \ tcp::resolver\ \ resolver(io_service)\;\n\ \ \ \ \ \ \ \ tcp::resolver::query\ \ query(\"localhost\",\ \ \"8080\")\;\n\ \ \ \ \ \ \ \ tcp::resolver::iterator\ \ endpoint_iterator\ \ =\ \ resolver.resolve(query)\;\n\ \ \ \ \ \ \ \ tcp::socket\ \ socket(io_service)\;\n\n\t\t\ \ \ \ printf(\"Proba\ polaczenia\\n\")\;\n\ \ \ \ \ \ \ \ \ \ \ \ boost::asio::connect(socket,\ \ endpoint_iterator)\;\n\t\t\ \ \ \ printf(\"Polaczono\\n\")\;\n\n\ \ \ \ \ \ \ \ boost::asio::streambuf\ \ REQUESTuest\;\n\ \ \ \ \ \ \ \ std::ostream\ \ REQUESTuest_stream(&REQUESTuest)\;\n\n\ \ \ \ \ \ \ \ REQUESTuest_stream\ <<\ \"POST\"\ <<\ \"/service/qqq/op\"\ <<\ \"HTTP/1.0\\n\"\;\n\ \ \ \ \ \ \ \ REQUESTuest_stream\ <<\ \"Host:\"\ <<\ \"localhost:8080\"\ <<\ \"\\n\"\;\n\ \ \ \ \ \ \ \ REQUESTuest_stream\ <<\ \"Accept:*/*\\n\"\;\n\t\tREQUESTuest_stream\ <<\ \"Content-Type:\ text/xml\\n\"\;\n\t\tREQUESTuest_stream\ <<\ \"Content-Length:\ \"<<\ REQUEST.size()\ <<\"\\n\\n\"\;\n\n\t\tREQUESTuest_stream\ <<\ REQUEST\;\n\t\n\ \ \ \ \ \ \ \ boost::asio::write(socket,\ \ REQUESTuest)\;\n\ \ \ \ \ \ \ \ boost::asio::streambuf\ \ response\;\n\ \ \ \ \ \ \ \ boost::asio::read_until(socket,\ \ response,\ \ \"\\r\\n\")\;\n\n\ \ \ \ \ \ \ \ std::istream\ \ response_stream(&response)\;\n\ \ \ \ \ \ \ \ std::string\ \ http_version\;\n\ \ \ \ \ \ \ \ \ \ \ \ response_stream\ >>\ http_version\;\n\ \ \ \ \ \ \ \ \ \ \ \ unsigned\ \ int\ status_code\;\n\ \ \ \ \ \ \ \ \ \ \ \ response_stream\ >>\ status_code\;\n\ \ \ \ \ \ \ \ std::string\ \ status_message\;\n\ \ \ \ \ \ \ \ std::getline(response_stream,\ status_message)\;\n\ \ \ \ \ \ \ \ \n\ \ \ \ \ \ \ \ if\ \ (!response_stream\ ||\ http_version.substr(0,\ 5)\ !=\ \"HTTP/\")\{\n\ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \ \"Bledny\ \ wynik\\n\"\;\n\ \ \ \ \ \ \ \ \ \ \ \ return\ \ 1\;\n\ \ \ \ \ \ \ \ \}\n\ \ \ \ \ \ \ \ \n\ \ \ \ \ \ \ \ if\ \ (status_code\ \ !=\ \ 200)\ \{\n\ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \"Kod\ \ \"\ <<\ status_code\ <<\ \"\\n\"\;\n\ \ \ \ \ \ \ \ \ \ \ \ return\ \ 1\;\n\ \ \ \ \ \ \ \ \}\n\n\ \ \ \ \ \ \ \ boost::asio::read_until(socket,\ \ response,\ \ \"\\n\\n\")\;\n\ \ \ \ \ \ \ \ std::string\ \ header\;\n\ \ \ \ \ \ \ \ while\ \ (std::getline(response_stream,\ header)\ &&\ header\ !=\ \"\\n\")\{\n\ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ header\ <<\ \"\\n\"\;\n\ \ \ \ \ \ \ \ \}\n\ \ \ \ \ \ \ \ std::cout\ \ <<\ \ \"\\n\"\;\n\n\ \ \ \ \ \ \ \ if\ (response.size()\ >\ 0)\{\n\t\t\ \ \ \ std::getline(response_stream,\ res_tmp)\;\n\t\t\ \ \ \ res\ +=\ res_tmp\;\ \ \ \ \ \ \ \ \n\t\ \ \ \ \}\n\n\ \ \ \ \ \ \ \ boost::system::error_code\ \ error\;\n\ \ \ \ \ \ \ \ while\ \ (boost::asio::read(socket,\ \ response,\ boost::asio::transfer_at_least(1),\ \ error))\ \ \{\n\t\t\ \ \ \ std::getline(response_stream,\ \ res_tmp)\;\n\t\t\ \ \ \ res\ \ +=\ \ res_tmp\;\ \ \ \ \n\ \ \ \ \ \ \ \ \}\n\n\ \ \ \ \ \ \ \ if\ \ (error\ !=\ boost::asio::error::eof)\ \{\n\ \ \ \ \ \ \ \ \ \ \ \ throw\ \ boost::system::system_error(error)\;\n\ \ \ \ \ \ \ \ \}\n\ \ \ \ \}\n\ \ \ \ catch\ \ (Exception\ \ e)\n\ \ \ \ \{\n\ \ \ \ \ \ \ \ cout\ <<\ \"Exception:\ \"\ <<\ e.what()\ <<\ \"\\n\"\;\n\ \ \ \ \}\n\n\ \ \ \ res\ =\ \"\ \ \"\ +\ \ res\;\n\ \ \ \ int\ \ d\ \ =\ \ 0\;\n\ \ \ \ int\ \ d_temp\;\n\ \ \ \ char\ \ c\;\n\n\ \ \ \ while\ \ (sscanf(res.c_str()\ +\ d,\ \"%*\[^<\]%c%n\",\ &c,\ &d_temp)\ ==\ 1)\{\n\ \ \t\td\ \ +=\ \ d_temp\;\n\t\tint\ \ number\;\n\t\tif\ \ (sscanf(res.c_str()\ +\ d,\"qqq:razyDwaResult>%d</qqq:razyDwaResult>%n\",\ &number,\ &d_temp)\ ==\ 1)\{\n\t\t\tprintf(\"%d\",number)\;\n\t\t\td\ \ +=\ \ d_temp\ \ -\ \ 1\;\t\t\n\t\t\}\n\t\}\n\n\ \ \ \ printf(\"\\n\")\;\n\ \ \ \ return\ \ 0\;\n\}\n\ns384283@lts:~/Desktop/TAS/TematD/Zad43\$\ \ ./a.out\ \ \n\n\ \ \ \ 1\ \ 2\ \ 3\ \ 4\ \ 5\ \ 6\ \ 7\ \ 8\ \ 9\n\ \ \ \ Proba\ polaczenia\n\ \ \ \ Polaczono\n\n\ \ \ \ 2\ \ 4\ \ 6\ \ 8\ \ 10\ \ 12\ \ \ \ 80\ \ \n\n\ \ \ \ Wys³any\ \ SOAP:\n\ \ \ \ <?xml\ \ version=\"1.0\"\ \ encoding=\"UTF-8\"?>\n\ \ \ \ <SOAP-ENV:Envelope\n\ \ \ \ \ \ \ \ xmlns:SOAP-ENV=\\\"http://schemas.xmlsoap.org/soap/envelope/\"\n\ \ \ \ \ \ \ \ xmlns:SOAP-ENC=\\\"http://schemas.xmlsoap.org/soap/encoding/\"\n\ \ \ \ \ \ \ \ xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\ \ \ \ \ \ \ \ xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n\ \ \ \ \ \ \ \ xmlns:ns1=\"http://127.0.0.1:8080/service/qqq\">\n\ \ \ \ \ \ \ \ <SOAP-ENV:Body>\n\ \ \ \ \ \ \ \ <ns1:razyDwaREQUESTuest\ \ xsi:type=\"ns1:razyDwaREQUESTuest\">\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">1</ns1:par1>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">2</ns1:par1>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">3</ns1:par1>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">4</ns1:par1>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">5</ns1:par1>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">6</ns1:par1>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">7</ns1:par1>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns1:par1\ \ xsi:type=\"xsd:int\">8</ns1:par1>\n\ \ \ \ \ \ \ \ </ns1:razyDwaREQUESTuest>\n\ \ \ \ \ \ \ \ </SOAP-ENV:Body>\n\ \ \ \ \ \ \ \ </SOAP-ENV:Envelope>\n\n\ \ \ \ Otrzymane\ \ HTTP:\n\ \ \ \ Content-Type:\ \ text/xml\;\ \ charset=UTF-8\n\ \ \ \ Connection:\ \ close\n\ \ \ \ Content-length:\ \ 741\n\n\ \ \ \ <?xml\ \ version=\"1.0\"\ \ \ \ encoding=\"utf-8\"?>\n\ \ \ \ <SOAP-ENV:Envelope\ \ xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\ \ xmlns:xsi=\"http://www.w3.org/1999/XMLSchema-instance\"\ \ \n\ \ \ \ \ \ \ \ xmlns:xsd=\"http://www.w3.org/1999/XMLSchema\"\ \ \n\ \ \ \ \ \ \ \ xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\ \ \n\ \ \ \ \ \ \ \ xmlns:qqq=\"http://127.0.0.1:8080/service/qqq\"><SOAP-ENV:Body>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResults>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>2</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>4</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>6</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>8</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>10</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>12</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>14</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ <qqq:razyDwaResult>16</qqq:razyDwaResult>\n\ \ \ \ \ \ \ \ </qqq:razyDwaResults></SOAP-ENV:Body></SOAP-ENV:Envelope>\n\nZADANIE\ 46\ -------------------------------\n\nJedynie\ styl\ rpc/encoded\ umo¿liwia\ przekazywanie\ cyklicznych\ struktur\ danych\ (np\ list\ cyklicznych)\nSprawd¼\ eksperymentalnie\ czy\ to\ prawda!!!\ \n\nstruct\ t_mojaStruct2\ \ \{\n\tint\ a,\ b,\ c\;\ struct\ t_mojaStruct2\ *nast\;\n\}\;\n\nstruct\ ns__zwrocCos2Response\ \{\n\tstruct\ t_mojaStruct2\ *return_\;\n\}\;\n\nint\ ns__zwrocCos2(struct\ ns__zwrocCos2Response\ *r)\;\n\n-----------------------------------q.serv-------------------------------\n\n#include\ \ \"qqq.nsmap\"\n\nint\ \ main()\ \ \{\n\ \ \ \ struct\ \ soap\ \ soap\;\n\ \ \ \ soap_init(&soap)\;\n\n\ \ \ \ int\ \ b=soap_bind(&soap,\ \ NULL,\ \ 8080,\ \ 100)\;\ \ \n\ \ \ \ if\ (b<0)\{\n\ \ \ \ \ \ \ \ \ soap_print_fault(&soap,\ \ stderr)\;\ \ soap_done(&soap)\;\ \ exit(1)\;\n\ \ \ \ \}\n\ \ \ \ while\ \ (1)\ \ \{\n\ \ \ \ \ \ \ \ soap_accept(&soap)\;\n\ \ \ \ \ \ \ \ soap_serve(&soap)\;\n\ \ \ \ \ \ \ \ soap_end(&soap)\;\n\ \ \ \ \ \ \ \ printf(\".\")\;\ \ fflush(stdout)\;\n\ \ \ \ \}\n\ \ \ \ return\ \ 0\;\n\}\n\nint\ \ ns__zwrocCos2(struct\ \ soap*\ \ soap,\ \ struct\ \ ns__zwrocCos2Response\ \ *r)\ \{\ \ \ \ \n\ \ \ \ r->return_\ \ =\ \ soap_malloc(\ \ soap,\ \ sizeof(\ \ struct\ \ t_mojaStruct2\ \ )\ \ )\;\n\n\ \ \ \ \ \ \ \ struct\ \ t_mojaStruct2*\ \ t2\ \ =\ \ soap_malloc(\ \ soap,\ \ sizeof(\ \ struct\ \ t_mojaStruct2\ \ )\ \ )\;\n\ \ \ \ \ \ \ \ struct\ \ t_mojaStruct2*\ \ t3\ \ =\ \ soap_malloc(\ \ soap,\ \ sizeof(\ \ struct\ \ t_mojaStruct2\ \ )\ \ )\;\n\t\n\ \ \ \ r->return_->nast\ \ =\ \ t2\;\n\ \ \ \ t2->nast\ \ =\ \ t3\;\n\ \ \ \ t3->nast\ \ =\ \ r->return_\;\n\ \ \ \ \ \ \ \ r->return_->a\ \ =\ \ 1\;\n\ \ \ \ \ \ \ \ r->return_->b\ \ =\ \ 2\;\n\ \ \ \ \ \ \ \ r->return_->c\ \ =\ \ 3\;\n\n\ \ \ \ t2->a\ \ =\ \ 4\;\n\ \ \ \ t2->b\ \ =\ \ 5\;\n\ \ \ \ t2->c\ \ =\ \ 6\;\n\n\ \ \ \ t3->a\ \ =\ \ 7\;\n\ \ \ \ t3->b\ \ =\ \ 8\;\n\ \ \ \ t3->c\ \ =\ \ 9\;\n\n\ \ \ \ return\ \ SOAP_OK\;\n\}\n\n-----------------------------k.java----------------------------\n\nimport\ \ qqq_pkg.*\;\nimport\ \ java.util.*\;\n\npublic\ \ class\ \ k\ \{\n\ \ \ \ public\ \ static\ \ void\ \ main(String\ \ args\[\])\ \{\n\ \ \ \ \ \ \ \ \ \ try\ \{\n\t\t\tQqqLocator\ \ loc\ \ =\ \ new\ \ QqqLocator()\;\n\t\t\tQqqPortType\ \ obiekt\ \ =\ \ loc.getqqq()\;\n\t\t\tTMojaStruct2\ \ res\ \ =\ \ obiekt.zwrocCos2()\;\n\t\t\tTMojaStruct2\ \ next\ \ =\ \ res.getNast()\;\n\t\t\tSystem.out.printf(\"%d\ \ %d\ \ %d\\n\",res.getA(),res.getB(),res.getC())\;\n\n\t\t\twhile(next\ !=\ res)\ \{\n\t\t\t\tSystem.out.printf(\"Element:\ \ %d\ \ %d\ \ %d\\n\",\ \ next.getA(),next.getB(),next.getC())\;\n\t\t\t\tnext\ \ =\ \ next.getNast()\;\n\t\t\t\}\n\n\ \ \ \ \ \ \ \ \ \ \}catch\ \ (\ \ Exception\ \ e\ \ )\ \{\n\t\ \ System.err.print(e.getMessage())\;\n\ \ \ \ \ \ \}\n\ \ \ \ \}\n\}\n\n\ \ \ \ \ \ \ \ RPC/ENCODED\n-----------------------------klient------------------------------------\ns384283@lts:~/Desktop/TAS/TematD/Zad46\$\ \ java\ \ k\nElement:\ \ 1\ \ 2\ \ 3\nElement:\ \ 4\ \ 5\ \ 6\nElement:\ \ 7\ \ 8\ \ 9\n\n-----------------------------serwer------------------------------------\ns384283@lts:~/Desktop/RPC/TematD/Zad46\$\ \ ./a.out\ \ \n\n\n\ \ \ \ \ \ \ \ DOCUMENT/LITERAL\n\n-----------------------------serwer------------------------------------\ns384283@lts:~/Desktop/RPC/TematD/Zad46_document\$\ \ ./a.out\ \ \nSegmentation\ \ fault\ \ (core\ \ dumped)\n\n-----------------------------klient------------------------------------\ns384283@lts:~/Desktop/RPC/TematD/Zad46_document\$\ \ java\ \ k\nerror(0)null\n\nZADANIE\ D1\ -------------------------------\n\nProszê\ pokazaæ\ jak\ s±\ reprezentowane\ dane\ typu\ \"sekwencja\ integer-ów\"\ gdy\ webserwis\ jest\ zbudowany:\n1.\ w\ stylu\ RPC/encoded\n2.\ w\ stylu\ Document/literal\nProszê\ przytoczyæ\ komunikaty\ soap/\ urywki\ wsdl\ pokazujace\ te\ ró¿nicê...\ \n\nSOAP\ REQUEST:\nDocument:\n\n<?xml\ version=\"1.0\"\ encoding=\"UTF-8\"?>\n<SOAP-ENV:Envelope\n\ \ \ \ xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n\ \ \ \ xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\n\ \ \ \ xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\ \ \ \ xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n\ \ \ \ xmlns:ns=\"qqq\">\n\ \ \ \ \ \ \ \ <SOAP-ENV:Body>\n\ \ \ \ \ \ \ \ \ \ \ \ <ns:razyMacierz>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns:mat1\ SOAP-ENC:arrayType=\"xsd:int\[1\]\">\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <ns:item>0</ns:item>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </ns:mat1>\n\ \ \ \ \ \ \ \ \ \ \ \ </ns:razyMacierz>\n\ \ \ \ \ \ \ \ </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>\n\nRPC:\n\n<?xml\ version=\"1.0\"\ encoding=\"UTF-8\"?>\n<SOAP-ENV:Envelope\n\ \ \ \ xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n\ \ \ \ xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\n\ \ \ \ xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\ \ \ \ xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n\ \ \ \ xmlns:ns=\"qqq\">\n\ \ \ \ \ \ \ \ <SOAP-ENV:Body\ SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\">\n\ \ \ \ \ \ \ \ \ \ \ \ <ns:razyMacierz>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <mat1\ SOAP-ENC:arrayType=\"xsd:int\[1\]\">\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <item>0</item>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </mat1>\n\ \ \ \ \ \ \ \ \ \ \ \ </ns:razyMacierz>\n\ \ \ \ \ \ \ \ </SOAP-ENV:Body>\n</SOAP-ENV:Envelope>\n\n\nEncoded\ -\ obecne\ nazwy\ parametrów\ w\ namespace\nRPC\ -\ nazwy\ parametrów\ nie\ nale¿±\ do\ namespace\n\nRó¿nice\ w\ przypadku\ WSDL:\ struktura\ z\ parametrami\ jest\ zdefiniowana\ w\ sekcji\ <types>,\ zatem\ s±\ w\ namespace\ (styl\ dokumentowy).\n\ \ \ \ W\ przypadku\ RPC/Encdoded\ -\ nie\ ma\ tego,\ parametry\ i\ rezultat\ wy³±cznie\ w\ sekcji\ <message>\ -\ mniejszy\ formalizm\n\n<types>\n\n\ <schema\ targetNamespace=\"qqq\"\n\ \ \ \ xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n\ \ \ \ xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\n\ \ \ \ xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\ \ \ \ xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n\ \ \ \ xmlns:ns=\"qqq\"\n\ \ \ \ xmlns=\"http://www.w3.org/2001/XMLSchema\"\n\ \ \ \ elementFormDefault=\"qualified\"\n\ \ \ \ attributeFormDefault=\"unqualified\">\n\ \ \n\ \ \ \ <import\ namespace=\"http://schemas.xmlsoap.org/soap/encoding/\"/>\n\ \ \ \ \ \ \ \ <complexType\ name=\"ArrayOfint\">\n\ \ \ \ \ \ \ \ \ \ \ \ <complexContent>\n\ \ \ \ \ \ \ \ \ \ \ \ <restriction\ base=\"SOAP-ENC:Array\">\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <sequence>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <element\ name=\"item\"\ type=\"xsd:int\"\ minOccurs=\"0\"\ maxOccurs=\"unbounded\"/>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </sequence>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <attribute\ ref=\"SOAP-ENC:arrayType\"\ WSDL:arrayType=\"xsd:int\[\]\"/>\n\ \ \ \ \ \ \ \ \ \ \ \ </restriction>\n\ \ \ \ \ \ \ \ \ \ \ \ </complexContent>\n\ \ \ \ \ \ \ \ </complexType>\n\ \ \n\ \ \ \ <!--\ operation\ request\ element\ -->\n\ \ \ \ <element\ name=\"razyMacierz\">\n\ \ \ \ \ \ \ \ <complexType>\n\ \ \ \ \ \ \ \ \ \ \ \ <sequence>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <element\ name=\"mat1\"\ type=\"ns:ArrayOfint\"\ minOccurs=\"1\"\ maxOccurs=\"1\"\ nillable=\"false\"/>\n\ \ \ \ \ \ \ \ \ \ \ \ </sequence>\n\ \ \ \ \ \ \ \ </complexType>\n\ \ \ \ </element>\n\ \ \n\ \ \ \ <!--\ operation\ response\ element\ -->\n\ \ \ \ <element\ name=\"razyMacierzResponse\">\n\ \ \ \ \ \ \ \ <complexType>\n\ \ \ \ \ \ \ \ \ \ \ \ <sequence>\n\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <element\ name=\"return\"\ type=\"ns:ArrayOfint\"\ minOccurs=\"0\"\ maxOccurs=\"1\"\ nillable=\"true\"/>\n\ \ \ \ \ \ \ \ \ \ \ \ </sequence>\n\ \ \ \ \ \ \ \ </complexType>\n\ \ \ \ </element>\n\ </schema>\n</types>\n
