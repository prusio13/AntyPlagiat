Use Case 1: Obsługa sprzedaży

Aktor podstawowy (Primary actor): Kasjer

Główni odbiorcy i oczekiwania względem systemu:
Kasjer: oczekuje możliwości szybkiego wprowadzania danych, braku błędów płatności ponieważ braki w kasie są odciągane z jego wypłaty
Klient: chce kupować szybko przy minimalnym wysiłku, oczekuje dowodu zakupu w celu realizacji możliwych zwrotów
Przedsiębiorstwo: chce poprawnie realizowanych transakcji i zadowolenia Klienta. Chce elementarnej tolerancji na błędy, aby umożliwić pracę nawet jeżeli składniki całego systemu sprzedaży nie działają (np. systemy autoryzacji płatności)
Urząd Skarbowy: chce uzyskiwać podatek od każdego sprzedanego produktu, przy sprzedaży systemu na rynku międzynarodowym konieczne uwzględnienie urzędów lokalnych i rządowych
Agencje autoryzacji płatności: chce otrzymać zapytania o potwierdzenie zapłaty w poprawnym protokole transmisji danych. Chcą poprawnej obsługi transakcji realizowanej przez sklep. 

Warunki wstępne: Kasjer jest zidentyfikowany i przeprowadzona została uwierzytelnianie

Warunki końcowe:
Sprzedaż jest bezpieczna. Podatki są poprawnie policzone. System księgowy i magazynowy jest zaktualizowany. Rachunek jest wydrukowany. Dokument autoryzacji płatności jest przechowany.

Scenariusz główny (ścieżka podstawowa):

1. Klient przychodzi do POS z towarami i/lub usługami, które chce nabyć
2. Kasjer rozpoczyna sprzedaż
3. Kasjer wprowadza identyfikator produktu
4. System przechowuje informację o sprzedanym produkcie i wyświetla opis produktu, cenę i aktualną cenę zbiorczą. Cena jest obliczana na bazie zestawu reguł obliczania ceny
Kasjer powtarza kroki 3-4 aż wprowadzone zostaną wszystkie produkty
5. System wyświetla cenę ostateczną wraz z naliczonymi podatkami
6. Kasjer przedstawia Klientowi cenę ostateczną i prosi o dokonanie płatności
7. Klient płaci i system zachowuje informację o płatności
8. System zapisuje informację o dokonanej sprzedaży i przesyła informację o sprzedaży i dokonanej płatności do zewnętrznego systemu księgowego i magazynowego
9. System drukuje paragon
10. Klient odchodzi z paragonem i zakupionymi towarami

Rozszerzenia (ścieżki alternatywne): 
*a. W dowolnym czasie, dotyczy sytuacji kiedy system zawiesza się:
Aby zapewnić poprawne księgowanie, niezbędne jest aby wszystkie kluczowe dane dotyczące transakcji mogły zostać odtworzone w dowolnym momencie ścieżki podstawowej
1. Kasjer restartuje system, loguje się, i żąda odtworzenia stanu przed zawieszeniem się systemu
2. System odtwarza stan przed zawieszeniem się 
		2a. System wykrywa błędy:
1. System wyświetla informację o błędzie Kasjerowi, zapisuje błąd i resetuje się
2. Kasjer rozpoczyna nową sprzedaż
3a. Błędny identyfikator:
	1. System sygnalizuje błąd i odrzuca wprowadzanie danych
3b. Do wprowadzenia jest kilka towarów tego samego typu, nie jest konieczne zachowanie informacji o sprzedaży jednostkowej (np. 5 jogurtów tego samego typu):
	1. Kasjer wprowadza identyfikator produktu oraz ilość produktów
3-6a. Klient prosi Kasjera o usunięcie produktu z listy zakupów
	1. Kasjer wprowadza identyfikator produktu, który ma nie być sprzedany
	2. System wyświetla uaktualnioną cenę zbiorczą
3-6b. Klient prosi Kasjera o chęci od odstąpienia od zakupu towarów:
	1. Kasjer kasuje sprzedaż w systemie
3-6c. Kasjer zawiesza sprzedaż:
	1. System zawiesza sprzedaż w taki sposób, że może ona być uruchomiona na 	dowolnym innym terminalu POS
4a. System podaje cenę produktu, która jest niepoprawna (np. Klient narzeka na coś i ma zaproponowaną niższą cenę):
	1. Kasjer wprowadza zmienioną cenę
	2. System wyświetla nową cenę
5a. System wykrywa  błąd komunikacji z zewnętrznym systemem obliczającym podatki:
	1. System restartuje usługę komunikacji i kontynuuje
		1a. System wykrywa, że komunikacja nie została przywrócona
			1. System sygnalizuje błąd
			2. Kasjer może ręcznie policzyć podatek, bądź anulować sprzedaż
5b. Klient oznajmia, że jest upoważniony do otrzymania zniżki (np. pracownik, stały klient):
	1. Kasjer sygnalizuje konieczność udzielania zniżki
	2. Kasjer wprowadza identyfikator Klienta
3. System prezentuje uzyskaną zniżkę bazując na dostępnych regułach udzielania zniżek
7a. Płacenie gotówką:
	1. Kasjer wprowadza kwotę przekazaną przez Klienta
	2. System wskazuje kwotę do zwrotu i otwiera szufladę z pieniędzmi
	3. Kasjer wkłada otrzymaną kwotę i wydaje resztę
	4. System zapisuje fakt dokonania zapłaty w gotówce
7b. Płacenie kartą:
	1. Klient wprowadza informację karcie płatniczej
	2. System wysyła zapytanie o autoryzację transakcji do Systemu Autoryzacji i żąda 	potwierdzenia możliwości zrealizowania transakcji
		2a. System wykrywa błąd współpracy z systemem zewnętrznym
			1. System sygnalizuje błąd kasjerowi
			2. Kasjer prosi Klienta o alternatywną formę zapłaty
	3. System otrzymuje zgodę na realizację transakcji i sygnalizuje to Kasjerowi
		3a. System otrzymuje informację o odrzuceniu płatności
			1. System sygnalizuje informację o zakazie płatności Kasjerowi
			2. Kasjer prosi Klienta o alternatywną formę zapłaty
4. System zachowuje informację o zrealizowaniu zapłaty przy pomocy karty oraz informację o potwierdzeniu realizacji transakcji
5. System udostępnia możliwość potwierdzenia zapłaty Klientowi
6. Kasjer prosi Klienta o potwierdzenia zapłaty, Klient potwierdza zapłatę

Wymagania specjalne:
Niezbędny ekran dotykowy na dużym płaskim monitorze, tekst musi być widoczny z odległości 1 metra
Autoryzacja musi być dokonana w czasie 30 sekund w 90% przypadków
Możliwość interfejsu wielojęzycznego

Wymagania technologiczne oraz ograniczenia na wprowadzane dane:
3a. Identyfikator produktu wprowadzony przez kod kreskowy lub z klawiatury
7a. Informacja o karcie kredytowej wprowadzona poprzez czytnik kart, bądź z klawiatury
7b.  Potwierdzenie zapłaty realizowane ręcznie przez Klienta na papierowym wydruku, bądź kodem PIN wprowadzonym z klawiatury przez Klienta. W najbliższych latach możliwa będzie realizacja potwierdzenia zapłaty podpisem cyfrowym

Kwestie otwarte:
Jakie są możliwe zmiany w systemie podatkowym?
Jaka customizacja jest niezbędna dla prowadzeniu różnego rodzaju biznesu?
Czy Klient może samodzielnie używać czytnika kart, czy robi to za niego Kasjer?
